apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../default
  - ../../../addons/machine-health-check
patches:
  - target:
      group: controlplane.cluster.x-k8s.io
      version: v1beta2
      kind: KubeadmControlPlane
    patch: |-
      apiVersion: controlplane.cluster.x-k8s.io/v1beta2
      kind: KubeadmControlPlane
      metadata:
        name: ${CLUSTER_NAME}-cp
      spec:
        remediation:
          maxRetry: 5
          retryPeriodSeconds: 120
          minHealthyPeriodSeconds: 7200
