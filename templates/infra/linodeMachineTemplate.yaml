---
kind: LinodeMachineTemplate
apiVersion: infrastructure.cluster.x-k8s.io/v1alpha2
metadata:
  name: ${CLUSTER_NAME}-cp
spec:
  template:
    spec:
      image: ${LINODE_OS:="linode/ubuntu22.04"}
      type: ${LINODE_CONTROL_PLANE_MACHINE_TYPE}
      region: ${LINODE_REGION}
      firewallRef:
        apiVersion: infrastructure.cluster.x-k8s.io/v1alpha2
        kind: LinodeFirewall
        name: ${CLUSTER_NAME}
      # diskEncryption: disabled
      #
      # linodeInterfaces can't be used for the control plane
      # if using the default NodeBalancer for the associated
      # LinodeCluster's .Spec.Network.LoadBalancerType
      # because we need a private IP to add the machine to the
      # NodeBalancer
      interfaces:
        - purpose: public
      authorizedKeys:
      # uncomment to include your ssh key in linode provisioning
      # - ${LINODE_SSH_PUBKEY}
---
apiVersion: infrastructure.cluster.x-k8s.io/v1alpha2
kind: LinodeMachineTemplate
metadata:
  name: ${CLUSTER_NAME}
spec:
  template:
    spec:
      image: ${LINODE_OS:="linode/ubuntu22.04"}
      type: ${LINODE_MACHINE_TYPE}
      region: ${LINODE_REGION}
      firewallRef:
        apiVersion: infrastructure.cluster.x-k8s.io/v1alpha2
        kind: LinodeFirewall
        name: ${CLUSTER_NAME}
      # diskEncryption: disabled
      interfaces:
        - purpose: public
      # uncomment if using new network interfaces and comment out interfaces above (requires beta opt-in)
      # linodeInterfaces:
      #   - public:
      #       ipv4:
      #         addresses:
      #           - address: "auto"
      authorizedKeys:
      # uncomment to include your ssh key in linode provisioning
      # - ${LINODE_SSH_PUBKEY}
